# 任务大厅竞标功能测试指南

## 概述
本指南将帮助您测试任务大厅的竞标功能，确保用户可以正常参与任务竞标。

## 测试前准备

### 1. 确保环境就绪
- 确保钱包已连接
- 确保合约服务已初始化
- 确保有足够的测试网APT余额
- 确保已创建至少一个任务

### 2. 访问任务大厅页面
- 打开浏览器，访问任务大厅页面 (`/tasks`)
- 确保页面正常加载并显示任务列表

## 测试步骤

### 步骤1: 加载测试脚本
在浏览器控制台中运行以下命令加载测试脚本：

```javascript
// 加载修复版测试脚本
fetch('/test-tasks-bidding-fixed.js')
  .then(response => response.text())
  .then(script => {
    eval(script);
    console.log('✅ 测试脚本加载成功');
  })
  .catch(error => {
    console.error('❌ 测试脚本加载失败:', error);
  });
```

### 步骤2: 检查页面功能
运行页面功能检查：

```javascript
checkTasksPageFeaturesFixed()
```

**预期结果：**
- 找到任务卡片
- 找到竞标按钮
- 找到筛选控件
- 找到搜索框

### 步骤3: 检查页面任务数据
查看页面上的任务详情：

```javascript
checkPageTasks()
```

**预期结果：**
- 显示所有任务卡片的详细信息
- 包括标题、状态、奖励、竞标按钮状态

### 步骤4: 测试竞标功能
运行完整的竞标功能测试：

```javascript
testTasksBiddingFixed()
```

**预期结果：**
- 成功获取任务列表
- 找到可竞标的任务
- 显示任务详情

### 步骤5: 模拟竞标操作
模拟点击竞标按钮：

```javascript
simulateBiddingFixed()
```

**预期结果：**
- 找到可用的竞标按钮
- 成功点击按钮
- 触发竞标流程

### 步骤6: 测试特定任务竞标
如果有特定任务ID，可以测试该任务的竞标：

```javascript
// 替换为实际的任务ID
testSpecificTaskBidding('your-task-id')
```

## 常见问题排查

### 问题1: 没有找到竞标按钮
**可能原因：**
- 任务状态不是竞标中
- 用户已参与该任务
- 用户是任务创建者
- 页面未完全加载

**解决方案：**
1. 检查任务状态是否为"竞标中"
2. 确保使用不同账户测试
3. 刷新页面重新加载
4. 检查控制台是否有错误

### 问题2: 竞标按钮被禁用
**可能原因：**
- 钱包未连接
- 合约服务未初始化
- 账户余额不足
- 已参与该任务

**解决方案：**
1. 确保钱包已连接
2. 重新连接钱包
3. 检查账户余额
4. 使用不同账户测试

### 问题3: 竞标失败
**可能原因：**
- 网络连接问题
- 合约调用失败
- 参数错误
- 权限不足

**解决方案：**
1. 检查网络连接
2. 查看控制台错误信息
3. 确认合约地址正确
4. 检查账户权限

## 测试用例

### 用例1: 正常竞标流程
1. 连接钱包
2. 访问任务大厅
3. 找到可竞标任务
4. 点击"立即竞标"按钮
5. 确认交易
6. 验证竞标成功

### 用例2: 重复竞标测试
1. 对同一任务进行竞标
2. 验证第二次竞标被拒绝
3. 检查错误提示

### 用例3: 自己创建的任务
1. 创建任务
2. 尝试参与自己创建的任务
3. 验证竞标按钮被禁用

### 用例4: 不同状态任务
1. 测试竞标中状态的任务
2. 测试进行中状态的任务
3. 测试已完成状态的任务
4. 验证只有竞标中状态可以参与

## 验证标准

### 功能验证
- ✅ 竞标按钮正确显示
- ✅ 竞标按钮状态正确（可用/禁用）
- ✅ 点击竞标按钮触发合约调用
- ✅ 竞标成功后更新任务状态
- ✅ 重复竞标被正确拒绝

### 用户体验验证
- ✅ 按钮状态清晰可见
- ✅ 错误提示信息明确
- ✅ 加载状态正确显示
- ✅ 操作反馈及时

### 数据验证
- ✅ 任务数据正确显示
- ✅ 参与者信息正确更新
- ✅ 状态变化正确反映

## 测试报告模板

```markdown
# 任务大厅竞标功能测试报告

## 测试环境
- 浏览器: [浏览器版本]
- 钱包: [钱包类型和版本]
- 网络: [测试网/主网]
- 账户: [测试账户地址]

## 测试结果
- [ ] 页面功能检查通过
- [ ] 竞标按钮正确显示
- [ ] 竞标功能正常工作
- [ ] 错误处理正确
- [ ] 用户体验良好

## 发现的问题
1. [问题描述]
2. [问题描述]

## 建议改进
1. [改进建议]
2. [改进建议]

## 测试结论
[测试结论]
```

## 联系支持
如果在测试过程中遇到问题，请：
1. 查看浏览器控制台错误信息
2. 检查网络连接状态
3. 确认钱包和合约配置
4. 联系技术支持团队 